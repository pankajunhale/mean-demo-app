<div class="container-fluid ">
  <div class="page-header">
    <div class="row">
      <div class="col-md-6">
        <h2 class="page-title" *ngIf="urlRequest.pageStatus == 'create'">Create User</h2>
        <h2 class="page-title" *ngIf="urlRequest.pageStatus == 'view'">User Details</h2>
        <h2 class="page-title" *ngIf="urlRequest.pageStatus == 'edit'">Update User</h2>
      </div>
      <div class="col-md-6 text-right">
        <a [routerLink]="['/userList']" class="btn btn-dark">User List</a>
      </div>
    </div>
  </div>
  <div class="section-container">
    <h3 class="section-title">Create User</h3>
    <div class="section-data-container">
      <form [formGroup]="userForm">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="userName">Name
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <input formControlName="userName" type="text" id="userName" [ngClass]="{'form-control': true, 
              'is-invalid':!getUserFormRef.userName.valid && getUserFormRef.userName.touched,
              'is-valid': getUserFormRef.userName.valid}" [(ngModel)]="userModel.UserName" />
              <p *ngIf="!getUserFormRef.userName.valid && getUserFormRef.userName.touched" class="text-danger">Name field is required</p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="email">Email
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <input formControlName="userEmail" type="text" id="email" [ngClass]="{'form-control': true, 
              'is-invalid':!getUserFormRef.userEmail.valid && getUserFormRef.userEmail.touched,
              'is-valid': getUserFormRef.userEmail.valid}" [(ngModel)]="userModel.UserEmail" />
              <p *ngIf="getUserFormRef.userEmail.errors?.required && getUserFormRef.userEmail.touched" class="text-danger">Email field is required</p>
              <p *ngIf="getUserFormRef.userEmail.errors?.pattern && getUserFormRef.userEmail.touched" class="text-danger">Enter valid email address</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userCountry">Country
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <select formControlName="userCountry" id="userCountry" [ngClass]="{'form-control': true, 
              'is-invalid':!getUserFormRef.userCountry.valid && getUserFormRef.userCountry.touched,
              'is-valid': getUserFormRef.userCountry.valid}" [(ngModel)]="userModel.Country" (change)="findState()">
                <option selected [ngValue]=undefined>Select</option>
                <option *ngFor="let country of countryDropdown" value="{{country.CountryCode}}">{{ country.Country }}</option>
              </select>
              <p *ngIf="getUserFormRef.userCountry.errors?.required && getUserFormRef.userCountry.touched" class="text-danger">Country field is required</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userState">State
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <select formControlName="userState" id="userState" [ngClass]="{'form-control': true, 
              'is-invalid':!getUserFormRef.userState.valid && getUserFormRef.userState.touched,
              'is-valid': getUserFormRef.userState.valid}" [(ngModel)]="userModel.State" (change)="findCity()">
                <option selected [ngValue]=undefined>Select</option>
                <option *ngFor="let state of stateDropdown" value="{{state.Region_Code}}">{{state.State}}</option>
              </select>
              <p *ngIf="getUserFormRef.userState.errors?.required && getUserFormRef.userState.touched" class="text-danger">State field is required</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userDistrict">District
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <select formControlName="userDistrict" id="userDistrict" [ngClass]="{'form-control': true, 
              'is-invalid':!getUserFormRef.userDistrict.valid && getUserFormRef.userDistrict.touched,
              'is-valid': getUserFormRef.userDistrict.valid}" [(ngModel)]="userModel.District">
                <option selected [ngValue]=undefined>Select</option>
                <option *ngFor="let district of districtDropdown" value="{{district.CityCode}}">{{district.Name}}</option>
              </select>
              <p *ngIf="getUserFormRef.userDistrict.errors?.required && getUserFormRef.userDistrict.touched" class="text-danger">District field is required</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userName">Location
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <input formControlName="userLocation" type="text" id="userName" [ngClass]="{'form-control': true, 
              'is-invalid':!getUserFormRef.userLocation.valid && getUserFormRef.userLocation.touched,
              'is-valid': getUserFormRef.userLocation.valid}" [(ngModel)]="userModel.Location">
              <p *ngIf="getUserFormRef.userLocation.errors?.required && getUserFormRef.userLocation.touched" class="text-danger">Location field is required</p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userName">Customer
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <select formControlName="userRole" class="form-control" [(ngModel)]="userModel.CustomerID">
                <option selected [ngValue]=undefined>Select</option>
                <option *ngFor="let customer of customerDropdown" value="{{customer._id}}">{{customer.CustomerName}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userName">Role
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <select formControlName="userRole" class="form-control" [(ngModel)]="userModel.RoleID">
                <option selected [ngValue]=undefined>Select</option>
                <option *ngFor="let role of roleDropdown" value="{{role._id}}">{{role.RoleName}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userName">Mobile No
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <input formControlName="userMobile" type="text" id="userName" class="form-control" [(ngModel)]="userModel.UserMobile" />
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userName">Set Password
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <input formControlName="userPassword" type="text" id="userName" class="form-control" [(ngModel)]="userModel.Password" />
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label for="userName">Is Active
                <i class="fa fa-asterisk customize-mandatory"></i>
              </label>
              <select formControlName="userIsActive" class="form-control" [(ngModel)]="userModel.isActive">
                <option selected [ngValue]=undefined>Select</option>
                <option value=true>Yes</option>
                <option value=false>No</option>
              </select>
            </div>
          </div>
        </div>
        <div *ngIf="urlRequest.pageStatus != 'view'" class="form-submit-container text-right">
          <span *ngIf="$userCreated | async">
            <div class="alert alert-success" role="alert">
              This is a success alertâ€”check it out!
            </div>
          </span>
          <input type="submit" *ngIf="urlRequest.pageStatus == 'create'" [disabled]="!userForm.valid" class="btn btn-primary" (click)="submit()"
            value="Submit" />
          <input type="submit" *ngIf="urlRequest.pageStatus == 'edit'" [disabled]="!userForm.valid" class="btn btn-primary" (click)="update()"
            value="Update" />
          <input type="reset" class="btn btn-primary" value="Clear" />
        </div>
      </form>
    </div>
  </div>
</div>